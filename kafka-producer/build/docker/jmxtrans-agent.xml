<jmxtrans-agent>
    <queries>
        <!-- kafka streams mbeans -->
        <query objectName="kafka.streams:type=stream-metrics,client-id=*" attribute="poll-rate" resultAlias="kstreams.poll.rate"/>
        <query objectName="kafka.streams:type=stream-metrics,client-id=*" attribute="commit-rate" resultAlias="kstreams.commit.rate"/>
        <query objectName="kafka.streams:type=stream-metrics,client-id=*" attribute="punctuate-rate" resultAlias="kstreams.punctuate.rate"/>
        <query objectName="kafka.streams:type=stream-metrics,client-id=*" attribute="process-rate" resultAlias="kstreams.process.rate"/>
        <query objectName="kafka.streams:type=stream-metrics,client-id=*" attribute="process-latency-avg" resultAlias="kstreams.process.latency_avg"/>
        <query objectName="kafka.streams:type=stream-metrics,client-id=*" attribute="process-latency-max" resultAlias="kstreams.process.latency_max"/>
    </queries>
    <outputWriter class="org.jmxtrans.agent.GraphitePlainTextTcpOutputWriter">
        <host>${HAYSTACK_GRAPHITE_HOST:monitoring-influxdb-graphite.kube-system.svc}</host>
        <port>${HAYSTACK_GRAPHITE_PORT:2003}</port>
        <namePrefix>haystack.pipes.kafka-producer.#hostname#.</namePrefix>
    </outputWriter>
    <collectIntervalInSeconds>60</collectIntervalInSeconds>
</jmxtrans-agent>
